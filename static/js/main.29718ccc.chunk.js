(this["webpackJsonprates-exchange"]=this["webpackJsonprates-exchange"]||[]).push([[0],{192:function(n,e,t){"use strict";t.r(e);var r=t(0),c=t.n(r),a=t(38),u=t.n(a),o=(t(97),t(10)),i=t(11);function l(){var n=Object(o.a)(["\n  border: #ccc solid 1px;\n  border-radius: 50%;\n  cursor: pointer;\n"]);return l=function(){return n},n}var s=i.a.div(l());var f=function(n){return r.createElement(s,{"data-testid":"switch-currencies",onClick:n.onClick},r.createElement("i",{className:"material-icons"},"swap_vert"))},m=t(5),v=function(n,e){return n.accountBalances[e]||0},b={},d=function(n,e){return function(n,e){return n.currencies[e]||b}(n,e).symbol||"?"},E=function(n){return Object.keys(n.currencies)},O=function(n){var e=n.exchange.currencyPair;return e?e.substring(3):""},h=function(n){var e=n.exchange.currencyPair;return e?e.substring(0,3):""},p=function(n){return n.exchange.currencyPair||""},g=function(n){return n.exchange.baseAmount},A=function(n){return n.exchange.contraAmount},C=function(n){return n.exchange.isBaseFixed},j=function(n){var e=g(n),t=h(n);return v(n,t)>=e},_=function(n){return j(n)&&0!==g(n)},T=function(n){var e=h(n);return d(n,e)},y=function(n){var e=O(n);return d(n,e)},S=function(n){return Boolean(n.exchange.shouldShowConfirmation)},x=function(n){return n.exchange.confirmationBaseAmount||0},N=function(n){return n.exchange.confirmationContraAmount||0},R=function(n,e){return n.rates[e]||0};function I(){var n=Object(o.a)(["\n  display: flex;\n  width: 140px;\n"]);return I=function(){return n},n}function B(){var n=Object(o.a)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 2px;\n  display: flex;\n  justify-content: center;\n  pointer-events: none;\n"]);return B=function(){return n},n}var F=function(n){var e=p(n);return R(n,e)},U=i.a.div(B()),w=i.a.div(I());var k,D=function(){var n=Object(m.c)(F),e=Object(m.c)(y),t=Object(m.c)(T);return r.createElement(U,null,r.createElement(w,null,r.createElement("i",{className:"material-icons"},"trending_up"),r.createElement("span",{"data-testid":"exchange-rate"},"".concat(t,"1 = ").concat(e).concat(n))))},M=t(39),P=t.n(M),H=t(19),X=t(14),V="207ed1e745f142db823fbad0d021f129",W=function(n){var e=n.substring(0,3),t=n.substring(3);return L(e,[t])},L=function(n){var e,t,r,c,a,u=arguments;return P.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=u.length>1&&void 0!==u[1]?u[1]:[],t=e.join(","),r="https://openexchangerates.org/api/latest.json?app_id=".concat(V,"&base=").concat(n),""!==t&&(r="".concat(r,"&symbols=").concat(t)),o.next=6,P.a.awrap(fetch(r));case 6:return c=o.sent,o.next=9,P.a.awrap(c.json());case 9:return a=o.sent,o.abrupt("return",Object.keys(a.rates).reduce((function(n,e){var t="".concat(a.base).concat(e);return Object(X.a)({},n,Object(H.a)({},t,a.rates[e]))}),{}));case 11:case"end":return o.stop()}}))},Y={};!function(n){n.SET_RATES="SET_RATES"}(k||(k={}));var G,J=function(n){return{type:k.SET_RATES,rates:n}};!function(n){n.SET_ACCOUNT_BALANCE="SET_ACCOUNT_BALANCE"}(G||(G={}));var z,K=function(n,e){return{type:"SET_ACCOUNT_BALANCE",currency:n,balance:e}},$=t(202);!function(n){n.SET_CURRENCY_PAIR="SET_CURRENCY_PAIR",n.SET_BASE_AMOUNT="SET_BASE_AMOUNT",n.SET_CONTRA_AMOUNT="SET_CONTRA_AMOUNT",n.SET_BASE_FIXED="SET_BASE_FIXED",n.SET_CONTRA_FIXED="SET_CONTRA_FIXED",n.SHOW_CONFIRMATION="SHOW_CONFIRMATION",n.HIDE_CONFIRMATION="HIDE_CONFIRMATION"}(z||(z={}));var q=function(n){return function(e,t){var r,c=t(),a=p(c);Y[r=a]&&clearInterval(Y[r]),function(n,e){W(n).then(e);var t=setInterval((function(){W(n).then(e)}),1e4);Y[n]=t}(n,(function(n){return e(function(n){return function(e){e(J(n)),e(Q())}}(n))})),e(function(n){return{type:z.SET_CURRENCY_PAIR,currencyPair:n}}(n))}},Q=function(){return function(n,e){var t=e();if(C(t)){var r=g(t),c=p(t),a=R(t,c),u=Number($.d($.c(r,a),2));n(tn(u))}else{var o=A(t),i=p(t),l=R(t,i);if(0===l)return void n(en(0));var s=Number($.d($.b(o,l),2));n(en(s))}}},Z=function(n){return function(e){e(rn()),e(en(n)),e(Q())}},nn=function(n){return function(e){e(cn()),e(tn(n)),e(Q())}},en=function(n){return{type:z.SET_BASE_AMOUNT,amount:n}},tn=function(n){return{type:z.SET_CONTRA_AMOUNT,amount:n}},rn=function(){return{type:z.SET_BASE_FIXED}},cn=function(){return{type:z.SET_CONTRA_FIXED}},an=function(){return function(n,e){var t=e();if(_(t)){var r=g(t),c=h(t),a=A(t),u=O(t),o=Number($.d($.e(v(t,c),r),2)),i=Number($.d($.a(v(t,u),a),2));n(function(n,e){return{type:z.SHOW_CONFIRMATION,baseAmount:n,contraAmount:e}}(r,a)),n(K(c,o)),n(K(u,i)),n(en(0)),n(tn(0))}}},un=function(n){return n.toLocaleString("en-US",{minimumFractionDigits:2})};function on(){var n=Object(o.a)(["\n  cursor: pointer;\n  color: ",";\n"]);return on=function(){return n},n}var ln=(0,i.a.span)(on(),(function(n){return n.shouldHighlight?"red":"black"}));var sn=function(n){var e=n.shouldHighlight,t=n.symbol,c=n.balance,a=n.onClick;return r.createElement(ln,{shouldHighlight:e,"data-testid":"balance",onClick:a},"Balance: ",t,un(c))},fn=t(78),mn=t(79),vn=t(80),bn=t(90),dn=t(81),En=t(91),On=t(195),hn=t(82),pn=t.n(hn);function gn(){var n=Object(o.a)(["\n  text-align: right;\n"]);return gn=function(){return n},n}var An={range:"POSITIVE"},Cn=function(n){function e(n){var t;return Object(mn.a)(this,e),(t=Object(bn.a)(this,Object(dn.a)(e).call(this,n))).destroy=void 0,t.input=void 0,t.state={externalUpdate:!1,initialUpdate:!!n.value},t}return Object(En.a)(e,n),Object(vn.a)(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(n){var e=n.value;this.setState({externalUpdate:e!==this.input.rawValue})}},{key:"render",value:function(){var n=this,e=this.props,t=e.onFocus,c=e.onBlur,a=e.onChange,u=e.value,o=Object(fn.a)(e,["onFocus","onBlur","onChange","value"]),i=this.state.externalUpdate;return r.createElement(On.a,Object.assign({"data-testid":"amount-input",innerRef:function(e){n.input=e,n.input&&i&&n.input.setRawValue(u)},onKeyDown:function(e){a(n.input.rawValue)},onBlur:function(e){c(n.input.rawValue)},onFocus:function(e){t(n.input.rawValue)}},o))}},{key:"componentDidMount",value:function(){var n=this.props.value,e=this.state.initialUpdate;this.destroy=pn()(this.input,An),e&&this.input.setRawValue(n)}},{key:"componentWillUnmount",value:function(){this.destroy()}}]),e}(r.Component);Cn.defaultProps=void 0,Cn.defaultProps={onChange:function(){},onBlur:function(){},onFocus:function(){}};var jn=Object(i.a)(Cn)(gn()),_n=t(87),Tn=t(204),yn=t(196),Sn=t(203),xn=t(197);function Nn(){var n=Object(o.a)(["\n  width: 70px;\n"]);return Nn=function(){return n},n}var Rn=Object(i.a)(Tn.a)(Nn());var In=function(n){var e=n.options,t=n.value,c=n.onChange,a=r.useState(!1),u=Object(_n.a)(a,2),o=u[0],i=u[1];return r.createElement(yn.a,{isOpen:o,toggle:function(){return i((function(n){return!n}))},"data-testid":"currency-selector"},r.createElement(Rn,{caret:!0,color:"primary"},t),r.createElement(Sn.a,null,r.createElement(xn.a,{header:!0},"Choose Source"),e.map((function(n,e){return r.createElement(xn.a,{key:e,onClick:function(){return c(n)}},n)}))))},Bn=t(198),Fn=t(199),Un=t(200),wn=t(205);function kn(){var n=Object(o.a)(["\n  margin-bottom: 30px;\n"]);return kn=function(){return n},n}var Dn=i.a.div(kn());var Mn=function(n){var e=n.amount,t=n.selectedCurrency,c=n.shouldHighlightBalance,a=void 0!==c&&c,u=n.symbol,o=n.balance,i=n.currencies,l=n.onAmountChange,s=n.onAmountFocus,f=n.onCurrencySelected,m=n.onBalanceClick;return r.createElement(Dn,null,r.createElement(Bn.a,null,r.createElement(Fn.a,null,r.createElement(Un.a,null,r.createElement(wn.a,{addonType:"prepend"},r.createElement(In,{value:t,options:i,onChange:f})),r.createElement(jn,{value:e,onChange:l,onFocus:s})))),r.createElement(sn,{onClick:m,shouldHighlight:a,balance:o,symbol:u}))};var Pn=function(){var n=Object(m.c)(E),e=Object(m.c)(g),t=Object(m.c)(h),c=!Object(m.c)(j),a=Object(m.c)(T),u=Object(m.c)((function(n){return v(n,t)})),o=Object(m.b)(),i={currencies:n,amount:e,selectedCurrency:t,shouldHighlightBalance:c,symbol:a,balance:u,onAmountChange:function(n){return o(Z(n))},onAmountFocus:function(){return o(rn())},onCurrencySelected:function(n){return o((e=n,function(n,t){var r=t(),c=O(r);n(rn());var a=c;c===e&&(a=h(r)),n(q("".concat(e).concat(a))),n(Q())}));var e},onBalanceClick:function(){return o(Z(u))}};return r.createElement(Mn,i)};var Hn=function(){var n=Object(m.c)(E),e=Object(m.c)(A),t=Object(m.c)(O),c=Object(m.c)(y),a=Object(m.c)((function(n){return v(n,t)})),u=Object(m.b)(),o={currencies:n,amount:e,selectedCurrency:t,symbol:c,balance:a,onAmountChange:function(n){return u(nn(n))},onAmountFocus:function(){return u(cn())},onCurrencySelected:function(n){return u((e=n,function(n,t){var r=t(),c=h(r);n(cn());var a=c;c===e&&(a=O(r)),n(q("".concat(a).concat(e))),n(Q())}));var e},onBalanceClick:function(){return u(nn(a))}};return r.createElement(Mn,o)},Xn=t(83);var Vn=function(){var n=Object(m.b)(),e=!Object(m.c)(_);return r.createElement(Xn.a,{color:"primary",block:!0,onClick:function(){return n(an())},disabled:e,"data-testid":"exchange-button"},"Exchange")};function Wn(){var n=Object(o.a)(["\n  height: 30px;\n  position: relative;\n  padding: 2px;\n  margin-bottom: 30px;\n  margin-left: 15px;\n  margin-right: 15px;\n  display: flex;\n"]);return Wn=function(){return n},n}var Ln=i.a.div(Wn());var Yn=function(){var n=Object(m.b)();return r.createElement(r.Fragment,null,r.createElement(Pn,null),r.createElement(Ln,null,r.createElement(f,{onClick:function(){return n((function(n,e){var t=e(),r=C(t),c=h(t),a=O(t),u="".concat(a).concat(c);if(n(q(u)),r){var o=g(t);n(nn(o))}else{var i=A(t);n(Z(i))}}))}}),r.createElement(D,null)),r.createElement(Hn,null),r.createElement(Vn,null))};function Gn(){var n=Object(o.a)(["\n  width: 50px;\n"]);return Gn=function(){return n},n}function Jn(){var n=Object(o.a)([""]);return Jn=function(){return n},n}function zn(){var n=Object(o.a)(["\n  height: 244px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n"]);return zn=function(){return n},n}var Kn=i.a.div(zn()),$n=i.a.div(Jn()),qn=i.a.div(Gn());var Qn=function(){var n=Object(m.b)(),e=Object(m.c)(T),t=Object(m.c)(y),c=un(Object(m.c)(x)),a=un(Object(m.c)(N));return r.createElement(r.Fragment,null,r.createElement(Kn,null,r.createElement(qn,null,r.createElement("i",{className:"material-icons",style:{fontSize:"50px"}},"check_circle")),r.createElement($n,{"data-testid":"confirmation-text"},"You exchanged ".concat(e).concat(c," to ").concat(t).concat(a))),r.createElement(Xn.a,{color:"primary",block:!0,onClick:function(){return n({type:z.HIDE_CONFIRMATION})},"data-testid":"done-button"},"Done"))},Zn=t(201);function ne(){var n=Object(o.a)(["\n  margin: auto;\n  max-width: 500px;\n"]);return ne=function(){return n},n}var ee=i.a.div(ne());var te=function(){var n=Object(m.c)(S);return r.createElement(ee,null,r.createElement(Zn.a,{fluid:"sm"},r.createElement("h3",null,"Exchange"),n?r.createElement(Qn,null):r.createElement(Yn,null)))},re=t(21),ce={baseAmount:0,contraAmount:0,isBaseFixed:!0},ae=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case z.SET_CURRENCY_PAIR:return Object(X.a)({},n,{currencyPair:e.currencyPair});case z.SET_BASE_AMOUNT:return Object(X.a)({},n,{baseAmount:e.amount});case z.SET_CONTRA_AMOUNT:return Object(X.a)({},n,{contraAmount:e.amount});case z.SET_BASE_FIXED:return Object(X.a)({},n,{isBaseFixed:!0});case z.SET_CONTRA_FIXED:return Object(X.a)({},n,{isBaseFixed:!1});case z.SHOW_CONFIRMATION:return Object(X.a)({},n,{shouldShowConfirmation:!0,confirmationBaseAmount:e.baseAmount,confirmationContraAmount:e.contraAmount});case z.HIDE_CONFIRMATION:return Object(X.a)({},n,{shouldShowConfirmation:!1,confirmationBaseAmount:null,confirmationContraAmount:null});default:return n}},ue=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===k.SET_RATES?(console.log(n,e),Object(X.a)({},n,{},e.rates)):n},oe=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===G.SET_ACCOUNT_BALANCE?Object(X.a)({},n,Object(H.a)({},e.currency,e.balance)):n},ie=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return n},le=Object(re.c)({exchange:ae,rates:ue,accountBalances:oe,currencies:ie}),se=t(86),fe=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[se.a],t=Object(re.e)(le,n,Object(re.d)(re.a.apply(void 0,e),window.devToolsExtension?window.devToolsExtension():function(n){return n}));return t},me=(t(190),t(191),fe({currencies:{USD:{symbol:"$"},GBP:{symbol:"\xa3"},EUR:{symbol:"\u20ac"}},accountBalances:{USD:1e3,EUR:1e3,GBP:1e3}}));me.dispatch(q("USDEUR"));var ve=function(){return c.a.createElement(m.a,{store:me},c.a.createElement("div",{className:"App"},c.a.createElement(te,null)))};u.a.render(c.a.createElement(ve,null),document.getElementById("root"))},92:function(n,e,t){n.exports=t(192)},97:function(n,e,t){}},[[92,1,2]]]);
//# sourceMappingURL=main.29718ccc.chunk.js.map